
1. english text

2. convert voice to text

3. text translation
////////////////////////////////////////////////////////////

audio recognition library - cmusphinx / voce / kaldi 

////////////////////////////////////////////////////////////

javascript web speech api - provides google chrome browser
var recognition = new webkitSpeechRecognition();

<!-- text input by voice through google api -->
<!DOCTYPE html>
<html>
    
    <head>   
        <script>
            function start_recognition()
            {
                var rec = new webkitSpeechRecognition();
            
                rec.lang = "en-US";
                rec.start();
                
                rec.onresult = function(e)
                {
                    document.write(e.results[0][0].transcript);
                    rec.stop();
                };
            }
        </script>
    </head>

    <body>

        <p id="output" onclick="start_recognition()">...</p>

    </body>

</html>

////////////////////////////////////////////////////////////
text to image - Graphics 2D API
...........................................................

public class Text_to_image
{
    void out(String text, String name_file, int text_size)
    {
        BufferedImage img = new BufferedImage
        (1, 1, BufferedImage.TYPE_INT_RGB);

        Graphics2D g2d = img.createGraphics();
        
        Font font = new Font("Arial", Font.PLAIN, text_size);
        g2d.setFont(font);        
        
        FontMetrics size = g2d.getFontMetrics();
        int width = size.stringWidth(text);
        int heigth = size.getHeight();
        
        
        img = new BufferedImage
        (width, heigth, BufferedImage.TYPE_INT_RGB);
        
        g2d = img.createGraphics();
        
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, 
                RenderingHints.VALUE_ANTIALIAS_ON);
        
        g2d.setFont(font);

        g2d.setColor(Color.WHITE);
        g2d.fillRect(0, 0, width, heigth);

        g2d.setColor(Color.BLACK);
        g2d.drawString(text, 0, size.getAscent());

        try
        {
            ImageIO.write(img, "png", 
                    new File(name_file + ".png"));
        }
        catch (IOException ex)
        {
            System.err.println("file not write");
        }

        System.out.println("Image done");
    }
}

////////////////////////////////////////////////////////////
text to speech - FreeTTS / MaryTTS

add libraries:
marytts-client-5.2-jar-with-dependencies.jar
marytts-runtime-5.2-jar-with-dependencies.jar
marytts-lang-en-5.2.jar
voice-cmu-slt-hsmm-5.2.jar
voice-cmu-bdl-hsmm-5.2.jar
voice-cmu-rms-hsmm-5.2.jar
...........................................................

public class Text_to_speech
{
    public static void main(String[] args) 
            throws MaryConfigurationException, 
            SynthesisException
    {
        String text = "John is walking.";
        
        MaryInterface mary = new LocalMaryInterface();
        mary.setVoice("cmu-rms-hsmm");
        
        AudioInputStream audio = mary.generateAudio( text );
        
        new Play(audio);
    }
}

final class Play
{
    Play(AudioInputStream audio)
    {
        play_audio(audio);
    }
    
    void play_audio(AudioInputStream audio)
    {
        AudioPlayer tts = new AudioPlayer();
        tts.setAudio(audio);
        tts.start();
    }
}

////////////////////////////////////////////////////////////
text to image
text to speech
read file  line by line
...........................................................
import java.awt.Color;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;

class TextToImage
{
    void output(String text, int file_name, int text_size)
    {
        BufferedImage img = new BufferedImage
        (1, 1, BufferedImage.TYPE_INT_RGB);

        Graphics2D g2d = img.createGraphics();
        
        
        Font font = new Font("Arial", Font.PLAIN, text_size);
        g2d.setFont(font);        
        
        FontMetrics size = g2d.getFontMetrics();
        int width = size.stringWidth(text);
        int heigth = size.getHeight();
        
        
        img = new BufferedImage
        (width, heigth, BufferedImage.TYPE_INT_RGB);
        
        g2d = img.createGraphics();
        
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, 
                RenderingHints.VALUE_ANTIALIAS_ON);
        
        g2d.setFont(font);
        

        g2d.setColor(Color.WHITE);
        g2d.fillRect(0, 0, width, heigth);

        g2d.setColor(Color.BLACK);
        g2d.drawString(text, 0, size.getAscent());

        try
        {
            ImageIO.write(img, "png", 
                    new File(file_name + ".png"));
        }
        catch (IOException ex)
        {
            System.err.println("file not write " + ex);
        }

        System.out.println("Image done");
    }
}
...........................................................
import java.io.File;
import java.io.IOException;
import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import marytts.LocalMaryInterface;
import marytts.MaryInterface;
import marytts.exceptions.MaryConfigurationException;
import marytts.exceptions.SynthesisException;
import marytts.modules.synthesis.Voice;
import marytts.util.data.audio.AudioPlayer;
import marytts.signalproc.effects.AudioEffect;
import marytts.signalproc.effects.AudioEffects;

class TextToSpeech
{
    private MaryInterface mary;
    private AudioInputStream audio;

    TextToSpeech()
    {
        try
        {
            mary = new LocalMaryInterface();
            mary.setVoice("cmu-rms-hsmm");
        }
        catch (MaryConfigurationException ex)
        {
            System.err.println("MaryTTS is not configured");
        }
    }
    
    void output(String text, int file_name)
    {
        speech_generation(text);
        save_audio(file_name);
    }
    
    private void speech_generation(String text)
    {
        try
        {            
            audio = mary.generateAudio( text );
        }
        catch (SynthesisException ex)
        {
            System.err.println("speech is not generated");
        }
    }
    
    private void save_audio(int file_name)
    {
        try
        { 
            AudioSystem.write(audio, AudioFileFormat.Type.WAVE,
                    new File(file_name + ".wav"));
        }
        catch (IOException ex)
        {
            System.err.println("audio not saved");
        }
    }
    
    void set_voice(String voice)
    {
        mary.setVoice(voice);
    }

    void play_audio(AudioInputStream audio)
    {
        AudioPlayer tts = new AudioPlayer();
        tts.setAudio(audio);
        tts.start();
    }
    
    void get_list_voices()
    {
        /* output all installed voices */
         Voice.getAvailableVoices()
                    .stream()
                    .forEach(System.out::println);
        // cmu-rms en_US male unit general
        // cmu-bdl-hsmm en_US male hmm
    }
    
    void get_list_audio_effects()
    {
        /* output all audio effects */
        for(AudioEffect e : AudioEffects.getEffects())
        {
            System.out.println("====================");
            System.out.println(e.getName());
            System.out.println(e.getHelpText());
        }
        //mary.setAudioEffects("durScale:0.5;");
    }
}
...........................................................
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class ReadFile
{    
    private File file;
    private Scanner scanner;
    
    ReadFile(String pathname)
    {        
        file = new File(pathname);
        
        try
        {
            scanner = new Scanner(file);
        } 
        catch (FileNotFoundException ex)
        {
            System.err.println("file not found");
        }
    }
    
    boolean has_string()
    {
        return scanner.hasNextLine();
    }
    
    String get_string()
    {
        return scanner.nextLine();
    }
}

////////////////////////////////////////////////////////////
task:
get string from file by index

<?php
    $path = "file.txt";

    $string = file($path);

    echo $string[1];
?>
...........................................................
task: 
sending data using the POST method

<!-- main.html -->
<form action="get_data.php" method="post">
    email
    <input type="text" name="email"> 
    <br>

    password
    <input type="password" name="password">
    <br>

    <input type="submit">
</form>

/* get_data.php */
<?php
    echo $_POST["email"];

    echo '<br>';

    echo $_POST["password"];
?>
...........................................................
task:
connection to mysql / get data

/* database.php */
<?php
    /*
      1)create database my_db;
      2)use my_db;
      3)create table user(
        id int not null PRIMARY KEY AUTO_INCREMENT,
        email varchar(255) not null unique,
        password varchar(64) not null);
      4)insert into user value
        (null, "test@test.com", "12345");
    */

    $connection = mysqli_connect(
            "localhost",
            "root",
            "12345",
            "my_db");

    $sql = "select * from user "
            . "where email='test@test.com'";

    $result = mysqli_query($connection, $sql);

    $array = mysqli_fetch_array($result);

    echo $array[2];
    /* output: 12345 */
?>
...........................................................
task:
library for connecting to mysql

/* database.php */
<?php
class database
{            
    private $connection;
    
    function __construct()
    {
        $this->connect();
    }
            
    private function connect()
    {
        $this->connection = mysqli_connect(
                "localhost",
                "root",
                "12345",
                "my_db");
    }
    
    function find($table, $where)
    {
        $sql = "select * from $table where $where;";
        
        $result = mysqli_query($this->connection, $sql);
        
        return mysqli_fetch_array($result);
    }
    
    function close()
    {
        mysqli_close($this->connection);
    }
}
...........................................................
<!DOCTYPE html>
task:
logging in using mysql / creating and checking a session

/* main.php */
<form action="user_login.php" method="post">
    email
    <input type="text" name="email"> 
    <br>

    password
    <input type="password" name="password">
    <br>

    <input type="submit">
</form>

/* user_login.php */
<?php 
session_start(); 
include_once './database.php';

$email = filter_input(INPUT_POST, "email");
$password = filter_input(INPUT_POST, "password");


$db = new database();

$array = $db->find("user", "email='$email'");


if($array[2] == $password)
{
    $_SESSION["authorized"] = true;

    header("Location: account.php");
    /* correct password */
}
else
{
    header("Location: main.php");
    /* wrong password */
}
$db->close();

<!-- account.php -->
<?php
session_start();
if($_SESSION["authorized"] != true)
{
    header("Location: main.php");
}
else
{
    echo "welcome";
}
...........................................................
task:
exit the session by click the button

/* exit.php */
<?php 
$exit = filter_input(INPUT_POST, "exit");

if($exit == "true")
{
    session_destroy();
    header("Location: main.php");
}
?>
<form action="account.php" method="post">
    <input type="hidden" value="true" name="exit"> 
    <input type="submit" value="exit">
</form>
...........................................................
task:
check email and password

<?php
class email_and_password_check
{               
    function email_check($email)
    {
        if(filter_var($email, FILTER_VALIDATE_EMAIL) == NULL)
        {
            echo 'email not valid';
        }
    }
    
    function password_check($password)
    {
        if(strlen($password) < 8)
        {
            echo 'password < 8';
        }
        else if(strlen($password) > 20)
        {
            echo 'password > 20';
        }
        else if(preg_match("@[0-9]+@", $password) == false)
        {
            echo 'password 0-9';
        }
        else if(preg_match("@[a-z]+@", $password) == false)
        {
            echo 'password a-z';
        }
        else if(preg_match("@[A-Z]+@", $password) == false)
        {
            echo 'password A-Z';
        }
    }
}
...........................................................
task:
auto resize text and images

p, h1, div
{
    font-family: monospace; 
    font-size: 5vw;
}
img
{
    width: 50%;
    height: auto;
}
...........................................................
task:
ajax GET

/* ajax_get.php */
<?php
$get_one = filter_input(INPUT_GET, "AAA");
$get_two = filter_input(INPUT_GET, "BBB");
echo $get_one . " " . $get_two;

/* file.html */
<script>
function send_message_GET()
{
    var one = document.getElementById("ONE").value;
    var two = document.getElementById("TWO").value;

    var string = "ajax_get.php?AAA=" + one + "&BBB=" + two;


    var request = new XMLHttpRequest();

    request.open("GET", string, true);
    request.send();

    request.onreadystatechange = function()
    {
        if(this.readyState === 4 && this.status === 200)
        {
            document.getElementById("message")
                    .innerHTML = this.responseText;
        }
    };
}
</script>

<input type="text" id="ONE"/>
<input type="text" id="TWO"/>

<p onclick="send_message_GET()">SEND</p>

<h1 id="message"></h1>
...........................................................
task:
ajax POST

/* ajax_get.php */
<?php
$get_one = filter_input(INPUT_POST, "AAA");
$get_two = filter_input(INPUT_POST, "BBB");
echo $get_one . " " . $get_two;

/* file.html */
<script>
function send_message_POST()
{
    var one = document.getElementById("ONE").value;
    var two = document.getElementById("TWO").value;
    
    var req = new XMLHttpRequest();
   
    req.onreadystatechange = function()
    {
        if(this.readyState === 4 && this.status === 200)
        {
            document.getElementById("message")
                    .innerHTML = this.responseText;
        }
    };
    req.open("POST", "ajax_get.php", true);
    req.setRequestHeader("Content-type", 
                         "application/x-www-form-urlencoded");
                         
    req.send("AAA=" + one + "&BBB=" + two);
}
</script>

<input type="text" id="ONE"/>
<input type="text" id="TWO"/>

<p onclick="send_message_POST()">SEND</p>

<h1 id="message"></h1>
...........................................................
/* ajax.js */
function post(php_file, response_in_html, query_string)
{
    var request = new XMLHttpRequest();
    
    request.onreadystatechange = function()
    {
        if(this.readyState === 4 && this.status === 200)
        {
            document.getElementById(response_in_html)
                    .innerHTML = this.responseText;
        }
    };
    request.open("POST", php_file, true);
    request.setRequestHeader(
            "Content-type", 
            "application/x-www-form-urlencoded");
    request.send(query_string);
}

/* file.html */
<script src="ajax.js"></script>
<script>
function login()
{
    var email    = document.getElementById("email").value;
    var password = document.getElementById("password").value;
    
    var query_string = "email=" + email +
                       "&password=" + password;
    
    post("user_login.php", "message", query_string);
}
</script>

email    <input type="text"     id="email"> 
password <input type="password" id="password">

<button onclick="login()">login</button>

<h1 id="message"></h1>

/* user_login.php */
<?php
$email = filter_input(INPUT_POST, "email");
$password = filter_input(INPUT_POST, "password");

if($email == "AAA" && $password == "AAA")
{
    echo 'correct password';
}
else
{
    echo 'wrong password';
}
...........................................................
/* set_JS_variable.php */
<?php
function set_var($name)
{
    echo "'" . $name . "'" . ";";
}

/* file.php */
<script>
function start()
{
    <?php include_once './set_JS_variable.php'; ?>

    var word = <?php set_var("hello")?>
    
    document.getElementById("set_words")
            .innerHTML = word;

    document.getElementById("set_audio")
            .src = <?php set_var("1.wav") ?>

    document.getElementById("set_image")
            .src = <?php set_var("img.png") ?>
}
</script>

<p id="set_words"> </p>

<audio id="set_audio" controls>
    Your browser does not support the
    audio element
</audio>

<img id="set_image"/> 

<button onclick="start()">START</button>
